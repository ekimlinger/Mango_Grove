/*! mango_grove 2016-04-26 */
function createPost(a){a.preventDefault();var b=$("#postMessageForm").serializeArray();$.each(b,function(a,b){newMessage[b.name]=b.value}),newMessage.global=!0,console.log("newMessage.id: ",newMessage.id),console.log("Data coming off form: ",newMessage),$.ajax({type:"POST",url:"/message",data:newMessage,success:getGlobalMessages}),$("#guestTextarea").val(""),$("#guestEmail").val(""),$("#username").val("")}function getGlobalMessages(){var a=$(this).data("type")||"all",b=20,c=new Date(Date.now());$.ajax({type:"GET",url:"/message/global/"+a+"/"+b+"/"+c,success:showAllGlobalFeed})}function showAllGlobalFeed(a){$(".comment-container").empty();for(var b=0;b<a.length;b++){var c=a[b];console.log(c),console.log("Name: ",c.name),console.log("Content: ",c.content),console.log("id: ",c._id),$(".comment-container").append('<div class="media animated fadeInRight"></div>');var d=$(".comment-container").children().last();d.append('<a class="forum-avatar" href="#"><img src="/vendors/Static_Seed_Project/img/a3.jpg" class="img-circle" alt="image"><div class="author-info"><strong>Posts:</strong> 543<br/><strong>Date of Post:</strong>'+c.date_created+"<br/></div></a>"),d.append('<div class="media-body"><h4 class="media-heading">Hampden-Sydney College in Virginia</h4>'+c.content+"<br/><br/>- "+c.name+"</div>"),d.append("<h4>comment : "+c.comments+"</h4>"),d.append('<button class="messageComment" data-id="'+c._id+'" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#guestMessageCommentModal"> Comment </button>')}}function getMessageID(){console.log("HERE: ",$(this).data("id"));var a=$(this).data("id");$("#createGuestComment").data("id",a),console.log("this message id will be",a),console.log("meow")}function createComment(a){newComment.messageID=$("#createGuestComment").data("id"),a.preventDefault();var b=$("#postCommentForm").serializeArray();$.each(b,function(a,b){newComment[b.name]=b.value,console.log("New Comment: ",newComment)}),$.ajax({type:"POST",url:"/message/comment",data:newComment,success:sendComment}),$("#guestTextarea").val(""),$("#guestEmail").val(""),$("#username").val("")}function sendComment(){var a=$("#createGuestComment").data("id");$.ajax({type:"GET",url:"/message/comment/"+a,success:getComment})}function getComment(a){for(var b=0;b<a.length;b++){var c=a[b];console.log(c),console.log("Name: ",c.name),console.log("Content: ",c.content),console.log("id: ",c._id),$(".media").append('<div class="newComment"></div>');var d=$(".media").children().last();d.append('<a class="forum-avatar" href="#"><img src="/vendors/Static_Seed_Project/img/a3.jpg" class="img-circle" alt="image"><div class="author-info"><strong>Posts:</strong> 543<br/><strong>Date of Post:</strong>'+c.date_created+"<br/></div></a>"),d.append('<div class="media-body"><h4 class="media-heading">Hampden-Sydney College in Virginia</h4>'+c.content+"<br/><br/>- "+c.name+"</div>")}}function showAllMangoMoments(){$(".comment-container").empty();for(var a=0;a<allMessages.length;a++){var b=allMessages[a];if("mm"==b.type){$(".comment-container").append('<div class="media animated fadeInRight"></div>');var c=$(".comment-container").children().last();c.append('<a class="forum-avatar" href="#"><img src="/vendors/Static_Seed_Project/img/a3.jpg" class="img-circle" alt="image"><div class="author-info"><strong>Posts:</strong> 543<br/><strong>Date of Post:</strong>'+b.date_created+"<br/></div></a>"),c.append('<div class="media-body"><h4 class="media-heading">Hampden-Sydney College in Virginia</h4>'+b.content+"<br/><br/>- "+b.name+"</div>")}}}function showAllShoutOuts(){$(".comment-container").empty();for(var a=0;a<allMessages.length;a++){var b=allMessages[a];if("so"==b.type){$(".comment-container").append('<div class="media animated fadeInRight"></div>');var c=$(".comment-container").children().last();c.append('<a class="forum-avatar" href="#"><img src="/vendors/Static_Seed_Project/img/a3.jpg" class="img-circle" alt="image"><div class="author-info"><strong>Posts:</strong> 543<br/><strong>Date of Post:</strong>'+b.date_created+"<br/></div></a>"),c.append('<div class="media-body"><h4 class="media-heading">Hampden-Sydney College in Virginia</h4>'+b.content+"<br/><br/>- "+b.name+"</div>")}}}function showAllAffirmations(){$(".comment-container").empty();for(var a=0;a<allMessages.length;a++){var b=allMessages[a];if("af"==b.type){$(".comment-container").append('<div class="media animated fadeInRight"></div>');var c=$(".comment-container").children().last();c.append('<a class="forum-avatar" href="#"><img src="/vendors/Static_Seed_Project/img/a3.jpg" class="img-circle" alt="image"><div class="author-info"><strong>Posts:</strong> 543<br/><strong>Date of Post:</strong>'+b.date_created+"<br/></div></a>"),c.append('<div class="media-body"><h4 class="media-heading">Hampden-Sydney College in Virginia</h4>'+b.content+"<br/><br/>- "+b.name+"</div>")}}}var newMessage={},newComment={};$(document).ready(function(){$("#createGuestPost").on("click",createPost),$("#createGuestComment").on("click",createComment),$(".comment-container").on("click",".messageComment",getMessageID),console.log("clicked"),$("#shoutOut").on("click",showAllShoutOuts),$("#mangoMoment").on("click",showAllMangoMoments),$("#affirmation").on("click",showAllAffirmations),$("#all").on("click",getGlobalMessages),getGlobalMessages(),getComment()});