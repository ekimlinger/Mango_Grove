/*! mango_grove 2016-04-25 */
function composeMessage(){var a=$(this).data("type");"mm"==a?($("#mm").replaceWith('<input type="radio" checked name="type" value="mm" id="mm">'),$("#guestCommentModal").modal("show")):"af"==a?($("#af").replaceWith('<input type="radio" checked name="type" value="af" id="af">'),$("#guestCommentModal").modal("show")):"so"==a&&($("#so").replaceWith('<input type="radio" checked name="type" value="so" id="so">'),$("#guestCommentModal").modal("show"))}function showMessages(a){var b=a,c=20,d=new Date(Date.now());$.ajax({type:"GET",url:"/message/global/"+b+"/"+c+"/"+d,success:loadGlobalFeed})}function createPost(a){a.preventDefault();var b=$("#postMessageForm").serializeArray();$.each(b,function(a,b){newMessage[b.name]=b.value}),newMessage.global=!0,console.log("Data coming off form: ",newMessage),$("#guestTextarea").val(""),$("#guestEmail").val(""),$("#username").val(""),$.ajax({type:"POST",url:"/message",data:newMessage,success:addNewMessageToFeed})}function addNewMessageToFeed(a){$(".comment-container").prepend('<div class="media animated fadeInRight"></div>');var b=$(".comment-container").children().first();b.append('<a class="forum-avatar" href="#"><img src="/vendors/Static_Seed_Project/img/a3.jpg" class="img-circle" alt="image"><div class="author-info"><strong>Posts:</strong> 543<br/><strong>Date of Post:</strong>'+a.date_created+"<br/></div></a>"),b.append('<div class="media-body"><h4 class="media-heading">Hampden-Sydney College in Virginia</h4>'+a.content+"<br/><br/>- "+a.name+"</div>")}function loadGlobalFeed(a){$(".comment-container").empty();for(var b=0;b<a.length;b++){var c=a[b];$(".comment-container").append('<div class="media animated fadeInRight"></div>');var d=$(".comment-container").children().last();d.append('<a class="forum-avatar" href="#"><img src="/vendors/Static_Seed_Project/img/a3.jpg" class="img-circle" alt="image"><div class="author-info"><strong>Posts:</strong> 543<br/><strong>Date of Post:</strong>'+c.date_created+"<br/></div></a>"),d.append('<div class="media-body"><h4 class="media-heading">Hampden-Sydney College in Virginia</h4>'+c.content+"<br/><br/>- "+c.name+"</div>")}}function dismissCheckbox(){var a=$.cookie($(".dismiss").attr("name"));a&&"true"==a?($(this).prop("checked",a),console.log("checked checkbox")):($("#welcomeModal").modal("show"),console.log("uncheck checkbox")),$(".dismiss").change(function(){$.cookie($(this).attr("name"),$(this).prop("checked"),{path:"/",expires:1})})}var newMessage={};$(document).ready(function(){var a="all";dismissCheckbox(),showMessages(a),$(".compose").on("click",composeMessage),$(".filter-messages").on("click",function(){a=$(this).data("type"),showMessages(a)}),$("#createGuestPost").on("click",createPost)});